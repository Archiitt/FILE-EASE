// Select the textarea element in the DOM
const textarea = document.querySelector("textarea");

// Select the input element with class "file-name" in the DOM
const fileNameInput = document.querySelector(".file-name input");

// Select the select menu element with class "save-as" in the DOM
const selectMenu = document.querySelector(".save-as select");

// Select the button element with class "save-btn" in the DOM
const saveBtn = document.querySelector(".save-btn");

// Add an event listener to the "change" event of the select menu
selectMenu.addEventListener("change", () => {
    // Get the selected format from the options in the select menu
    const selectedFormat = selectMenu.options[selectMenu.selectedIndex].text;
    
    // Update the inner text of the save button to display the selected format
    saveBtn.innerText = `Save As ${selectedFormat.split(" ")[0]} File`;
});

// Add an event listener to the "click" event of the save button
saveBtn.addEventListener("click", () => {
    // Create a Blob (binary large object) containing the content of the textarea
    const blob = new Blob([textarea.value], { type: selectMenu.value });
    
    // Create a URL that represents the Blob object
    const fileUrl = URL.createObjectURL(blob);
    
    // Create a new <a> element
    const link = document.createElement("a");
    
    // Set the download attribute of the link to the filename from the input
    link.download = fileNameInput.value;
    
    // Set the href attribute of the link to the created URL
    link.href = fileUrl;
    
    // Programmatically trigger a click event on the link to initiate the download
    link.click();
});
